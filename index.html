<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Conc√©ntrese - Memory Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://fonts.googleapis.com/css2?family=Oleo+Script:wght@400;700&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Segoe UI", sans-serif;
            background-image: url("fondo-azul.png");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* ------------------- BOT√ìN MUTE ------------------- */
        .mute-btn {
            position: fixed;
            top: 16px;
            right: 16px;
            z-index: 200;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            font-size: 24px;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: .2s;
        }

        .mute-btn:hover {
            background: rgba(0, 0, 0, 0.8);
        }

        /* ------------------- T√çTULO ------------------- */
        .titulo {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: clamp(38px, 6vw, 72px);
            font-family: "Oleo Script", cursive;
            font-weight: 700;
            color: #f9cf63;
            text-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            z-index: 20;
        }

        /* ------------------- DECORACIONES ------------------- */
        .estrellas {
            position: absolute;
            top: -40px;
            right: -25px;
            width: clamp(260px, 40vw, 480px);
            pointer-events: none;
        }

        .rama-izq,
        .rama-der {
            position: absolute;
            bottom: 20px;
            width: clamp(70px, 12vw, 150px);
            pointer-events: none;
        }

        .rama-izq {
            left: 20px;
        }

        .rama-der {
            right: 20px;
        }

        /* ------------------- INICIO ------------------- */
        .inicio-centro {
            position: fixed;
            inset: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        #btnIniciar {
            background: #ffd36c;
            padding: 16px 55px;
            border-radius: 16px;
            border: none;
            font-size: clamp(20px, 4vw, 34px);
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            transition: .2s;
        }

        #btnIniciar:hover {
            transform: scale(1.05);
            background: #ffcc4f;
        }

        /* ------------------- JUEGO ------------------- */
        .contenedor-juego {
            width: 100%;
            padding-top: 10%;
            display: none;
            flex-direction: column;
            align-items: center;
        }

                /* Ajuste responsivo del tablero */
        @media (max-width: 992px) {

            /* tablets horizontales y verticales */
            .contenedor-juego {
                padding-top: 50%;
                width: 75%;
            }
        }

        @media (max-width: 768px) {

            /* tablets peque√±as / phablets */
            .tabcontenedor-juegolero {
                padding-top: 50%;
                width: 85%;
            }
        }

        @media (max-width: 600px) {

            /* m√≥viles */
            .contenedor-juego {
                padding-top: 50%;
                width: 95%;
            }
        }

        /* ----------------------------------------------------
   TABLERO 6 COLUMNAS FIJAS ‚Äì CON TU CAMBIO DE 60%
---------------------------------------------------- */
        .tablero {
            width: 80%;
            max-width: 100%;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: clamp(10px, 1.6vw, 22px);
            justify-items: center;
        }

        /* Ajuste responsivo del tablero */
        @media (max-width: 992px) {

            /* tablets horizontales y verticales */
            .tablero {
                width: 75%;
            }
        }

        @media (max-width: 768px) {

            /* tablets peque√±as / phablets */
            .tablero {
                width: 85%;
            }
        }

        @media (max-width: 600px) {

            /* m√≥viles */
            .tablero {
                width: 95%;
            }
        }

        /* ----------------------------------------------------
   CARTAS RESPONSIVAS SIN CAMBIAR COLUMNAS
---------------------------------------------------- */
        .carta {
            width: 100%;
            max-width: 100%;
            aspect-ratio: 403 / 243;
            border-radius: 14px;
            position: relative;
            transform-style: preserve-3d;
            transition: .35s ease;
            cursor: pointer;
        }

        /* Reducir tama√±o en m√≥viles */
        @media (max-width: 1100px) {
            .carta {
                max-width: 100%;
            }
        }

        @media (max-width: 992px) {
            .carta {
                max-width: 100%;
            }
        }

        @media (max-width: 820px) {
            .carta {
                max-width: 100%;
            }
        }

        @media (max-width: 720px) {
            .carta {
                max-width: 100%;
            }
        }

        @media (max-width: 620px) {
            .carta {
                max-width: 100%;
            }
        }

        @media (max-width: 540px) {
            .carta {
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .carta {
                max-width: 100%;
            }
        }

        @media (max-width: 400px) {
            .carta {
                max-width: 100%;
            }
        }

        @media (max-width: 350px) {
            .carta {
                max-width: 100%;
            }
        }

        /* CARAS */
        .cara {
            position: absolute;
            inset: 0;
            border-radius: 14px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            backface-visibility: hidden;
        }

        .cara.trasera {
            transform: rotateY(180deg);
        }

        .img-carta {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .carta.volteada {
            transform: rotateY(180deg);
        }

        .carta.encontrada {
            pointer-events: none;
        }

        /* ------------------- MODAL ------------------- */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.65);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 30;
            backdrop-filter: blur(5px);
        }

        .modal.activo {
            display: flex;
        }

        .modal-content {
            background: #ffffffee;
            padding: 35px;
            border-radius: 20px;
            width: 90%;
            max-width: 420px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        /* RESTAURAR BOT√ìN ORIGINAL */
        #btnReiniciar {
            background: #ffd36c;
            padding: 12px 30px;
            border-radius: 16px;
            border: none;
            font-size: 22px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 25px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
            transition: 0.2s;
        }

        #btnReiniciar:hover {
            background: #ffcc4f;
            transform: scale(1.05);
        }

        /* ------------------- CONFETI ORIGINAL RESTAURADO ------------------- */
        #confeti-container {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: visible;
            z-index: 99999;
        }

        .confeti {
            position: absolute;
            width: 8px;
            height: 14px;
            opacity: 0.9;
            transform-origin: center;
            animation: caerConfeti linear forwards;
        }

        @keyframes caerConfeti {
            0% {
                transform: translate(var(--xoffset), -10vh) rotate(var(--rotInicial));
            }

            100% {
                transform: translate(var(--xoffsetFinal), 110vh) rotate(var(--rotFinal));
            }
        }
    </style>
</head>

<body>

    <!-- M√öSICA -->
    <audio id="musicaFondo" src="musica-fondo.mp3" preload="auto" loop></audio>
    <audio id="audioWin" src="victoria.mp3" preload="auto"></audio>

    <!-- BOT√ìN MUTE -->
    <button id="btnMute" class="mute-btn">üîä</button>

    <!-- CONFETI -->
    <div id="confeti-container"></div>

    <!-- T√çTULO -->
    <div class="titulo">Batalla de Memoria Maccab√≠</div>

    <img src="estrellas.svg" class="estrellas">
    <img src="rama-izquierda.svg" class="rama-izq">
    <img src="rama-derecha.svg" class="rama-der">

    <!-- BOT√ìN INICIAR -->
    <div id="inicioCentro" class="inicio-centro">
        <button id="btnIniciar">Iniciar Juego</button>
    </div>

    <!-- JUEGO -->
    <div id="contenedorJuego" class="contenedor-juego">
        <div id="tablero" class="tablero"></div>
    </div>

    <!-- MODAL GANASTE -->
    <div id="modalGanaste" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom:10px;">¬°Felicidades!</h2>
            <h2 style="margin-bottom:20px;">!◊û÷∑◊ñ÷º÷∏◊ú ◊ò◊ï÷π◊ë</h2>
            <button id="btnReiniciar">Jugar de nuevo</button>
        </div>
    </div>

    <script>

        const musicaFondo = document.getElementById("musicaFondo");
        const sonidoVictoria = document.getElementById("audioWin");
        const btnMute = document.getElementById("btnMute");
        let musicaActiva = true;

        btnMute.addEventListener("click", () => {
            musicaActiva = !musicaActiva;
            if (musicaActiva) { musicaFondo.play(); btnMute.textContent = "üîä"; }
            else { musicaFondo.pause(); btnMute.textContent = "üîá"; }
        });

        /* ---- Juego ---- */

        const tablero = document.getElementById("tablero");
        const btnIniciar = document.getElementById("btnIniciar");
        const btnReiniciar = document.getElementById("btnReiniciar");
        const inicioCentro = document.getElementById("inicioCentro");
        const contenedorJuego = document.getElementById("contenedorJuego");
        const modal = document.getElementById("modalGanaste");

        const frontImages = [
            "1.png", "2.png", "3.png", "4.png", "5.png", "6.png",
            "7.png", "8.png", "9.png", "10.png", "11.png", "12.png",
            "13.png", "14.png", "15.png", "16.png", "17.png", "18.png",
            "19.png", "20.png", "21.png", "22.png", "23.png", "24.png"
        ];

        const iconImages = [
            "Sevibon.png", "Moneda.png", "Aceite.png", "Menorah.png",
            "Sufganiot.png", "Torah.png", "Olivo.png", "Templo.png",
            "Regalo.png", "Banderines.png", "Dulces.png", "Martillo.png"
        ];

        let carta1 = null;
        let carta2 = null;
        let bloqueo = false;
        let paresEncontrados = 0;

        btnIniciar.addEventListener("click", iniciarJuego);
        btnReiniciar.addEventListener("click", iniciarJuego);

        function iniciarJuego() {
            inicioCentro.style.display = "none";
            contenedorJuego.style.display = "flex";

            if (musicaActiva) {
                musicaFondo.volume = 0.55;
                musicaFondo.play();
            }

            paresEncontrados = 0;
            modal.classList.remove("activo");
            tablero.innerHTML = "";
            carta1 = null;
            carta2 = null;
            bloqueo = false;

            const backs = [...iconImages, ...iconImages];
            mezclar(backs);

            for (let i = 0; i < 24; i++) {

                const carta = document.createElement("div");
                carta.classList.add("carta");
                carta.dataset.icon = backs[i];

                carta.innerHTML = `
            <div class="cara frontal">
                <img src="${frontImages[i]}" class="img-carta">
            </div>
            <div class="cara trasera">
                <img src="${backs[i]}" class="img-carta">
            </div>
        `;

                carta.addEventListener("click", () => voltear(carta));
                tablero.appendChild(carta);
            }
        }

        function mezclar(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
        }

        function voltear(carta) {
            if (bloqueo) return;
            if (carta === carta1) return;
            if (carta.classList.contains("encontrada")) return;

            carta.classList.add("volteada");

            if (!carta1) {
                carta1 = carta;
            } else {
                carta2 = carta;
                verificar();
            }
        }

        function verificar() {
            bloqueo = true;

            const icon1 = carta1.dataset.icon;
            const icon2 = carta2.dataset.icon;

            if (icon1 === icon2) {

                carta1.classList.add("encontrada");
                carta2.classList.add("encontrada");

                paresEncontrados++;
                carta1 = null;
                carta2 = null;
                bloqueo = false;

                if (paresEncontrados === 12) {
                    ganar();
                }

            } else {

                setTimeout(() => {
                    carta1.classList.remove("volteada");
                    carta2.classList.remove("volteada");
                    carta1 = null;
                    carta2 = null;
                    bloqueo = false;
                }, 900);
            }
        }

        /* ---- GANAR ---- */
        function ganar() {
            modal.classList.add("activo");
            inicioCentro.style.display = "flex";

            musicaFondo.pause();
            musicaFondo.currentTime = 0;

            sonidoVictoria.currentTime = 0;
            sonidoVictoria.play();

            lanzarConfeti();
        }

        /* ---- CONFETI RESTAURADO ---- */
        function lanzarConfeti() {

            const contenedor = document.getElementById("confeti-container");

            let total = 300;
            let batch = 35;
            let delay = 150;
            let lanzados = 0;

            function oleada() {

                for (let i = 0; i < batch; i++) {

                    if (lanzados >= total) return;

                    const c = document.createElement("div");
                    c.classList.add("confeti");

                    c.style.left = Math.random() * 100 + "vw";

                    const xOffset = (Math.random() * 40 - 20) + "vw";
                    const xOffsetFinal = (Math.random() * 60 - 30) + "vw";
                    c.style.setProperty("--xoffset", xOffset);
                    c.style.setProperty("--xoffsetFinal", xOffsetFinal);

                    c.style.setProperty("--rotInicial", Math.random() * 360 + "deg");
                    c.style.setProperty("--rotFinal", (Math.random() * 1440 + 720) + "deg");

                    const size = Math.random() * 6 + 6;
                    c.style.width = size + "px";
                    c.style.height = (size * 1.6) + "px";

                    const colors = ["#ff595e", "#ffca3a", "#8ac926", "#1982c4", "#6a4c93",
                        "#ff924c", "#ff4d6d", "#4d96ff", "#6ede8a", "#f72585"];
                    c.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];

                    const dur = Math.random() * 1.5 + 2.5;
                    c.style.animationDuration = dur + "s";

                    contenedor.appendChild(c);
                    lanzados++;

                    setTimeout(() => c.remove(), dur * 1000);
                }

                if (lanzados < total) {
                    setTimeout(oleada, delay);
                }
            }

            oleada();
        }

    </script>

</body>

</html>